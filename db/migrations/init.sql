CREATE TABLE "users" (
  "id" integer PRIMARY KEY,
  "line_user_id" varchar,
  "created_at" datetime
);

CREATE TABLE "locations" (
  "id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "latitude" decimal(10,8),
  "longitude" decimal(11,8),
  "address" varchar,
  "sub_district" varchar,
  "district" varchar,
  "province" varchar,
  "postalCode" varchar
);

CREATE TABLE "reports" (
  "id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "tag" varchar,
  "user_id" integer,
  "first_name" varchar,
  "last_name" varchar,
  "location_id" integer,
  "main_phone_number" varchar,
  "reserve_phone_number" varchar,
  "priority" integer,
  "additional_detail" text,
  "created_at" datetime,
  "updated_at" timestamp
);

CREATE TABLE "report_assistances" (
  "id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "report_id" integer,
  "assistent_type_id" integer,
  "quantity" integer,
  "is_active" boolean
);

CREATE TABLE "report_logs" (
  "id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "tag" varchar,
  "report_id" integer,
  "first_name" varchar,
  "last_name" varchar,
  "location_id" integer,
  "main_phone_number" varchar,
  "reserve_phone_number" varchar,
  "additional_detail" text,
  "created_at" datetime,
  "successed_at" timestamp
);

CREATE TABLE "report_assistance_logs" (
  "id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "report_log_id" integer,
  "assistance_type_id" integer,
  "quantity" integer,
  "is_active" boolean
);

CREATE TABLE "assistent_types" (
  "id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "name" varchar,
  "priority" integer,
  "unit" varchar
);

CREATE TABLE "image_types" (
  "id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "name" varchar
);

CREATE TABLE "images" (
  "id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "name" varchar,
  "image_type_id" integer,
  "report_id" integer,
  "report_log_id" integer
);

CREATE TABLE "users_admin" (
  "id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "username" varchar,
  "password" integer,
  "created_at" datetime
);

ALTER TABLE "report_assistances" ADD FOREIGN KEY ("report_id") REFERENCES "reports" ("id") ON DELETE CASCADE ON UPDATE CASCADE;

ALTER TABLE "images" ADD FOREIGN KEY ("report_id") REFERENCES "reports" ("id") ON DELETE CASCADE ON UPDATE CASCADE;

ALTER TABLE "reports" ADD FOREIGN KEY ("user_id") REFERENCES "users" ("id") ON DELETE CASCADE ON UPDATE CASCADE;

ALTER TABLE "locations" ADD FOREIGN KEY ("id") REFERENCES "reports" ("location_id") ON DELETE CASCADE ON UPDATE CASCADE;

ALTER TABLE "report_assistance_logs" ADD FOREIGN KEY ("report_log_id") REFERENCES "report_logs" ("id") ON DELETE CASCADE ON UPDATE CASCADE;

ALTER TABLE "images" ADD FOREIGN KEY ("report_log_id") REFERENCES "report_logs" ("id") ON DELETE CASCADE ON UPDATE CASCADE;

ALTER TABLE "reports" ADD FOREIGN KEY ("id") REFERENCES "report_logs" ("report_id") ON DELETE CASCADE ON UPDATE CASCADE;

ALTER TABLE "locations" ADD FOREIGN KEY ("id") REFERENCES "report_logs" ("location_id") ON DELETE CASCADE ON UPDATE CASCADE;

ALTER TABLE "assistent_types" ADD FOREIGN KEY ("id") REFERENCES "report_assistance_logs" ("assistance_type_id") ON DELETE CASCADE ON UPDATE CASCADE;

ALTER TABLE "assistent_types" ADD FOREIGN KEY ("id") REFERENCES "report_assistances" ("assistent_type_id") ON DELETE CASCADE ON UPDATE CASCADE;

ALTER TABLE "images" ADD FOREIGN KEY ("image_type_id") REFERENCES "image_types" ("id") ON DELETE CASCADE ON UPDATE CASCADE;
